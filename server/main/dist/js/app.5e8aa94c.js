(function(e){function t(t){for(var a,r,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)r=s[l],i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==i[s]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-2d0da6c4":"bccbbf85","chunk-49aaf31d":"4fcd9991","chunk-8c880abe":"9699128c","chunk-b92b2006":"31f73aef"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-49aaf31d":1,"chunk-8c880abe":1,"chunk-b92b2006":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d0da6c4":"31d6cfe0","chunk-49aaf31d":"ade32aad","chunk-8c880abe":"6c60186f","chunk-b92b2006":"c878e2b8"}[e]+".css",i=c.p+a,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===a||l===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.request=a,delete r[e],h.parentNode.removeChild(h),n(o)},h.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){r[e]=0}));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise(function(t,n){a=i[e]=[t,n]});t.push(a[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");o.type=a,o.request=r,n[1](o)}i[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"142c":function(e,t,n){},"4ec2":function(e,t,n){"use strict";var a=n("142c"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=n("9f7b"),i=n.n(r),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"content"}},[n("Header"),n("router-view")],1),n("Particles")],1)},s=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar-container"},[a("b-navbar",{staticClass:"navbar navbar-container__navbar"},[a("div",{staticClass:"navbar-container__main"},[e.showAuthLinks?a("i",{staticClass:"navbar-container__navbar__bars fa fa-bars fa-2x",attrs:{"aria-hidden":"true"},on:{click:e.onMenuClick}}):e._e(),a("router-link",{staticClass:"navbar-brand navbar-container__navbar__brand",attrs:{to:"/"}},[a("img",{staticClass:"navbar-container__navbar__brand__img",attrs:{src:n("a678"),width:"50",height:"50",alt:"diamond"}}),e._v("\n        DIAMOND CHAT\n      ")])],1),a("div",{staticClass:"navbar-container__elements"},[a("div",{staticClass:"navbar navbar-container__navbar__auth-links"},[e.showAuthLinks?a("router-link",{staticClass:"navbar-container__navbar__link",attrs:{to:"/random-chat"}},[e._v("Random Chat\n        ")]):e._e(),e.showAuthLinks?a("router-link",{staticClass:"navbar-container__navbar__link",attrs:{to:"/dashboard"}},[e._v("Dashboard\n        ")]):e._e()],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-form",[e.showAuthLinks?a("b-button",{staticClass:"navbar-container__navbar__button",on:{click:e.logout}},[e._v("Logout")]):e._e()],1)],1)],1)]),a("SideNav",{attrs:{show:e.showSideNav,logout:e.logout},on:{sideNavClosed:function(t){e.showSideNav=t}}})],1)},u=[],l=(n("a481"),n("cebc")),d=n("9962"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidenav",class:{"show-sidenav":e.show,"close-sidenav":!e.show},attrs:{id:"mySidenav"}},[n("div",{staticClass:"sidenav__closebutton",on:{click:e.closeSideNav}},[e._v("Ã—")]),n("router-link",{staticClass:"sidenav__link",attrs:{to:"/"}},[n("div",{staticClass:"sidenav__link__wrapper",on:{click:e.closeSideNav}},[e._v("\n      Home\n    ")])]),n("router-link",{staticClass:"sidenav__link",attrs:{to:"/random-chat"}},[n("div",{staticClass:"sidenav__link__wrapper",on:{click:e.closeSideNav}},[e._v("\n      Random Chat\n    ")])]),n("router-link",{staticClass:"sidenav__link",attrs:{to:"/dashboard"}},[n("div",{staticClass:"sidenav__link__wrapper",on:{click:e.closeSideNav}},[e._v("\n      Dashboard\n    ")])]),n("div",{staticClass:"sidenav__link"},[n("div",{staticClass:"sidenav__link__wrapper",on:{click:e.closeSideNavAndLogout}},[e._v("\n      Logout\n    ")])])],1)},f=[],p={name:"SideNavigation",props:{show:Boolean,logout:Function},methods:{closeSideNav:function(){this.$emit("sideNavClosed",!1)},closeSideNavAndLogout:function(){this.$emit("sideNavClosed",!1),this.logout()}}},v=p,b=(n("63f3"),n("2877")),m=Object(b["a"])(v,h,f,!1,null,"117b3dd6",null),_=m.exports,k=n("2f62"),g=Object(k["a"])("auth"),y=g.mapState,w=g.mapActions,A={name:"Header",data:function(){return{isLoginScreen:!1,showSideNav:!1}},components:{SideNav:_},methods:Object(l["a"])({},w(["logout","setUserInfo","setAccessToken"]),{onMenuClick:function(){this.showSideNav=!this.showSideNav},loginWithSpotify:function(){d["a"].loginWithSpotify()},checkIsTokenValid:function(e){e&&(this.$router.replace("/"),d["a"].getUserInfo(e).then(function(t){console.log(t),this.setUserInfo(t),this.setAccessToken(e)}.bind(this)).catch(function(e){console.log(e)}.bind(this)))}}),computed:Object(l["a"])({},y(["isAuthenticated"]),{showAuthLinks:function(){return!!this.isAuthenticated||(this.isLoginScreen,!1)}}),watch:{$route:function(e,t){this.isLoginScreen="/login"===e.path},"$route.query.access_token":function(e){this.checkIsTokenValid(e)}}},C=A,S=(n("5a59"),Object(b["a"])(C,c,u,!1,null,"2f3c20fd",null)),x=S.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"particles-js"}})},O=[],N={name:"Particles",mounted:function(){var e=this;n("572f"),this.$nextTick(function(){e.initParticlesJS()})},methods:{initParticlesJS:function(){particlesJS("particles-js",{particles:{number:{value:750,density:{enable:!0,value_area:789.1476416322727}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.48927153781200905,random:!1,anim:{enable:!0,speed:.2,opacity_min:0,sync:!1}},size:{value:2,random:!0,anim:{enable:!0,speed:2,size_min:0,sync:!1}},line_linked:{enable:!1,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:.2,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:83.91608391608392,size:1,duration:3,opacity:1,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}}},T=N,E=(n("4ec2"),Object(b["a"])(T,j,O,!1,null,null,null)),I=E.exports,L={name:"App",components:{Particles:I,Header:x}},P=L,U=Object(b["a"])(P,o,s,!1,null,null,null),$=U.exports,R=(n("96cf"),n("3b8d")),M=n("8c4f"),z=n("0e44"),D=n("e814"),H=n.n(D),J=n("04e1"),B=n.n(J),W={namespaced:!0,state:{token:null,isAuthenticated:!1,sessionExpired:!1,display_name:"",email:""},mutations:{updateIsAuthenticated:function(e,t){200===t.status?(ee.push("/random-chat"),e.isAuthenticated=!0,e.display_name=t.data.display_name,e.email=t.data.email,e.gender=t.data.gender,e.sessionExpired=!1):setTimeout(function(){ee.push("/")},2e3)},clearUserInfo:function(e){e.display_name="",e.email=""},setAccessToken:function(e,t){e.token=t},deleteAccessToken:function(e){e.token=null},unAuthUser:function(e){e.isAuthenticated=!1}},actions:{setUserInfo:function(e,t){e.commit("updateIsAuthenticated",t)},setAccessToken:function(e,t){e.commit("setAccessToken",t)},logout:function(e){e.commit("unAuthUser"),e.commit("deleteAccessToken"),e.commit("clearUserInfo"),ee.push("/")},loadUser:function(e){var t=(new Date).getTime()/1e3,n=null,a=e.token;null!=a?n=B()(a).exp:(e.isAuthenticated=!1,e.sessionExpired=!0,this.commit("auth/clearUserInfo")),null!=n&&H()(n)-t>0&&(e.isAuthenticated=!0,e.sessionExpired=!1)}},getters:{isAuthenticated:function(e){return e.isAuthenticated},sessionExpired:function(e){return e.sessionExpired}}},q=W;a["a"].use(k["b"]);var F=new k["b"].Store({plugins:[Object(z["a"])()],modules:{auth:q}}),V=F;function X(e,t,n){return Y.apply(this,arguments)}function Y(){return Y=Object(R["a"])(regeneratorRuntime.mark(function e(t,n,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){V.getters["auth/isAuthenticated"]?a():a(n.path)},e.next=3,V.dispatch("auth/loadUser");case 3:r();case 4:case"end":return e.stop()}},e,this)})),Y.apply(this,arguments)}a["a"].use(M["a"]);var G=function(){return n.e("chunk-8c880abe").then(n.bind(null,"7d97"))},K=function(){return n.e("chunk-2d0da6c4").then(n.bind(null,"6c12"))},Q=function(){return n.e("chunk-49aaf31d").then(n.bind(null,"5928"))},Z=function(){return n.e("chunk-b92b2006").then(n.bind(null,"e19f"))},ee=new M["a"]({mode:"history",linkExactActiveClass:"active-page",routes:[{path:"/",name:"home",component:G},{path:"/dashboard",name:"dashboard",component:K,beforeEnter:X},{path:"/random-chat",name:"chat",component:Q,beforeEnter:X},{path:"*",name:"notfound",component:Z}]});n("2dd8");a["a"].use(i.a),a["a"].config.productionTip=!1,new a["a"]({router:ee,store:V,render:function(e){return e($)}}).$mount("#app")},"5a59":function(e,t,n){"use strict";var a=n("5ad5"),r=n.n(a);r.a},"5ad5":function(e,t,n){},"63f3":function(e,t,n){"use strict";var a=n("ed67"),r=n.n(a);r.a},9962:function(e,t,n){"use strict";n("96cf");var a=n("3b8d"),r=n("795b"),i=n.n(r),o=n("d225"),s=n("b0b4"),c=n("bc3a"),u=n.n(c),l=n("b383"),d=n.n(l),h="https://diamondchat.herokuapp.com/api/auth",f=function(){function e(){Object(o["a"])(this,e)}return Object(s["a"])(e,null,[{key:"loginWithFacebook",value:function(e){return new i.a(function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.post("".concat(h,"/facebook"),e,{withCredentials:!0});case 3:a=t.sent,n(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),n(t.t0.response);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}())}},{key:"loginWithSpotify",value:function(){window.location.href="https://accounts.spotify.com/authorize?"+d.a.stringify({response_type:"code",client_id:"545b463b4a42430db436e208ea53a01a",scope:"user-read-private user-read-email, user-top-read, playlist-read-private, user-read-recently-played, user-read-email, user-read-birthdate",redirect_uri:"https://diamondchat.herokuapp.com/api/auth/spotify/callback"})}},{key:"getUserInfo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new i.a(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(n,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("".concat(h,"/spotify/userInfo"),{token:t});case 3:r=e.sent,n(r),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),a(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=f},a678:function(e,t,n){e.exports=n.p+"img/diamondwhite.4f2cf501.svg"},ed67:function(e,t,n){}});
//# sourceMappingURL=app.5e8aa94c.js.map